# Git版本控制实验报告

**实验项目**：Doc-Doctor（代码注释检查工具）  
**实验日期**：2025年11月26日  
**实验人员**：[填写姓名]

---

## 一、实验目的与要求

### 实验目的

（1）了解分支和标签概念

（2）掌握如何创建与合并分支

（3）掌握如何解决分支冲突

（4）掌握多人协作进行软件开发的方法

（5）掌握标签的创建和相关操作

### 实验要求

1. 在本地创建本学期拟提交的大作业软件项目代码仓，将所有的项目源程序文件提交到本地库中。

2. 为某个文件创建分支，在分支中提交和对比文件

3. 将修改的内容合并到主分支

4. 与项目组同学合作，各自将本地代码提到同一个远程版本库

5. 与项目组同学共同编写同一个代码文件，体验冲突解决。

6. 为项目增加本地和远程标签，并查看、删除标签

**要求提交图文并茂的实验报告，认真实践项目的所有过程。**

---

## 二、实验环境

- **操作系统**：Windows 10/11
- **Git版本**：`git --version`（请在此处填写实际版本号）
- **开发工具**：Visual Studio Code / Cursor IDE
- **项目名称**：Doc-Doctor（代码注释检查工具）
- **远程仓库平台**：GitHub / Gitee
- **远程仓库地址**：（请在此处填写实际仓库地址）

---

## 三、实验步骤与结果

### 3.1 创建本地代码仓库并提交文件

#### 操作步骤

1. 进入项目目录 `d:\Coding\Doc-Doctor`
2. 检查Git仓库状态，查看未跟踪的文件
3. 使用 `git add` 命令添加未跟踪的文件到暂存区
4. 使用 `git commit` 命令提交文件到本地库
5. 使用 `git log` 查看提交历史

#### 关键命令

```bash
# 查看当前状态
git status

# 添加未跟踪的文件
git add "Git实验-最完善完成方案.md"
git add "Git实验快速操作指南.md"
git add "一键执行脚本.ps1"

# 提交到本地库
git commit -m "添加Git实验相关文档和脚本"

# 查看提交历史
git log --oneline -5
```

#### 实验结果

**截图1：git status 显示未跟踪文件**
> [在此处插入截图，显示 `git status` 命令的输出，包含未跟踪的文件列表]

**截图2：git add 后文件已添加到暂存区**
> [在此处插入截图，显示 `git status` 命令的输出，显示文件已添加到暂存区（Changes to be committed）]

**截图3：git commit 提交成功**
> [在此处插入截图，显示 `git commit` 命令的成功输出信息]

**截图4：git log 显示提交历史**
> [在此处插入截图，显示 `git log --oneline` 命令的输出，展示提交记录]

#### 结果分析

通过本步骤，成功将项目中的未跟踪文件提交到本地Git仓库。Git能够追踪这些文件的版本变化，为后续的分支操作和版本管理奠定了基础。

---

### 3.2 创建分支并提交修改

#### 操作步骤

1. 使用 `git checkout -b` 创建并切换到新分支 `feature-接口文档优化`
2. 修改 `接口文档.md` 文件，在文件末尾添加更新日志部分
3. 使用 `git add` 和 `git commit` 提交修改
4. 使用 `git diff` 对比分支与主分支的差异
5. 使用 `git branch` 查看所有分支

#### 关键命令

```bash
# 创建并切换到新分支
git checkout -b feature-接口文档优化

# 修改文件后，查看修改内容
git diff

# 提交修改
git add 接口文档.md
git commit -m "优化接口文档：添加更新日志"

# 对比分支与主分支的差异
git diff main..feature-接口文档优化

# 查看所有分支
git branch
```

#### 实验结果

**截图5：创建分支**
> [在此处插入截图，显示 `git checkout -b feature-接口文档优化` 命令的输出，显示成功创建并切换到新分支]

**截图6：git branch 显示分支列表**
> [在此处插入截图，显示 `git branch` 命令的输出，当前分支前有 `*` 标记，显示所有本地分支列表]

**截图7：修改文件内容**
> [在此处插入截图，显示在 `接口文档.md` 文件末尾添加的更新日志内容]

**截图8：git diff 显示文件差异**
> [在此处插入截图，显示 `git diff main..feature-接口文档优化` 命令的输出，展示两个分支之间的文件差异，包括添加的内容以绿色 `+` 标记显示]

**截图9：git commit 提交分支修改**
> [在此处插入截图，显示 `git commit` 命令的成功输出，确认修改已提交到分支]

#### 结果分析

成功创建了功能分支 `feature-接口文档优化`，并在该分支中对 `接口文档.md` 进行了修改。通过 `git diff` 命令可以清晰地看到分支与主分支之间的差异，这有助于在合并前审查修改内容。分支的创建使得可以在不影响主分支的情况下进行功能开发和实验。

---

### 3.3 合并分支到主分支

#### 操作步骤

1. 使用 `git checkout main` 切换回主分支
2. 使用 `git merge` 将功能分支合并到主分支
3. 使用 `git log --graph` 查看合并历史图
4. 使用 `git branch -d` 删除已合并的分支（可选）

#### 关键命令

```bash
# 切换回主分支
git checkout main

# 合并功能分支
git merge feature-接口文档优化

# 查看合并历史图
git log --oneline --graph --all -10

# 删除已合并的分支（可选）
git branch -d feature-接口文档优化

# 验证分支已删除
git branch
```

#### 实验结果

**截图10：切换回主分支**
> [在此处插入截图，显示 `git checkout main` 命令的输出，确认已切换到主分支]

**截图11：git merge 合并分支**
> [在此处插入截图，显示 `git merge feature-接口文档优化` 命令的输出，显示合并成功的信息，如 "Fast-forward" 或 "Merge made by the 'recursive' strategy"]

**截图12：git log --graph 显示合并历史图**
> [在此处插入截图，显示 `git log --oneline --graph --all -10` 命令的输出，以图形方式展示分支合并的历史，可以看到分支的创建、提交和合并过程]

**截图13：删除已合并的分支**
> [在此处插入截图，显示 `git branch -d feature-接口文档优化` 命令的输出，确认分支已删除，以及 `git branch` 显示当前只剩下 main 分支]

#### 结果分析

成功将功能分支 `feature-接口文档优化` 合并到主分支 `main`。合并后，主分支包含了分支中的所有修改。通过 `git log --graph` 可以直观地看到分支的创建、开发和合并过程，这有助于理解Git的分支管理机制。删除已合并的分支可以保持仓库的整洁。

---

### 3.4 多人协作（推送到远程仓库）

#### 操作步骤

1. 检查远程仓库配置
2. 使用 `git push` 将本地代码推送到远程仓库
3. 验证推送成功
4. 在远程仓库网页上查看代码

#### 关键命令

```bash
# 查看远程仓库配置
git remote -v

# 查看远程仓库详细信息
git remote show origin

# 推送main分支到远程
git push origin main

# 查看远程分支
git branch -r

# 查看所有分支（本地和远程）
git branch -a
```

#### 实验结果

**截图14：git remote -v 显示远程仓库**
> [在此处插入截图，显示 `git remote -v` 命令的输出，展示远程仓库的名称和URL地址]

**截图15：git push 推送成功**
> [在此处插入截图，显示 `git push origin main` 命令的输出，显示推送进度和成功信息，如 "Writing objects: 100%"，"To [仓库地址]" 等]

**截图16：git branch -r 显示远程分支**
> [在此处插入截图，显示 `git branch -r` 命令的输出，展示远程分支列表，确认 main 分支已推送到远程]

**截图17：远程仓库网页界面**
> [在此处插入截图，显示GitHub/Gitee网页上的仓库界面，展示文件列表、提交历史等信息，证明代码已成功推送到远程仓库]

#### 结果分析

成功将本地代码推送到远程仓库，实现了代码的远程备份和共享。远程仓库的建立为多人协作奠定了基础，团队成员可以通过远程仓库共享代码、查看提交历史、进行代码审查等操作。这是分布式版本控制系统的核心优势之一。

---

### 3.5 冲突解决

#### 操作步骤

1. 创建第二个工作目录，模拟另一个开发者
2. 在第二个目录中克隆远程仓库（或本地仓库）
3. 在第二个目录中修改 `接口文档.md` 并提交推送
4. 在第一个目录中修改同一文件的同一位置并提交
5. 在第一个目录中拉取远程更改，产生冲突
6. 手动解决冲突，保留或合并两边的修改
7. 提交冲突解决并推送

#### 关键命令

**第二个工作目录（开发者2）：**

```bash
# 切换到上级目录
cd d:\Coding

# 克隆仓库到新目录
git clone "d:\Coding\Doc-Doctor" "Doc-Doctor-Developer2"
# 或克隆远程仓库：git clone [远程仓库地址] Doc-Doctor-Developer2

# 进入第二个工作目录
cd Doc-Doctor-Developer2

# 修改接口文档.md，在更新日志部分添加内容
# 例如：添加 "**2025-11-26**: 开发者2的修改：添加了新的功能说明。"

# 提交修改
git add 接口文档.md
git commit -m "开发者2：更新接口文档"

# 推送到远程（如果使用远程仓库）
git push origin main
```

**第一个工作目录（开发者1）：**

```bash
# 回到第一个工作目录
cd d:\Coding\Doc-Doctor

# 修改接口文档.md的同一位置
# 例如：添加 "**2025-11-26**: 开发者1的修改：优化了文档结构。"

# 提交修改
git add 接口文档.md
git commit -m "开发者1：更新接口文档"

# 尝试推送（如果使用远程仓库，可能会失败）
# git push origin main

# 拉取远程更改（会产生冲突）
git pull origin main
# 或合并本地第二个目录的更改
# git pull d:\Coding\Doc-Doctor-Developer2 main
```

**解决冲突：**

```bash
# 查看冲突状态
git status

# 打开接口文档.md，会看到冲突标记：
# <<<<<<< HEAD
# 开发者1的修改：优化了文档结构。
# =======
# 开发者2的修改：添加了新的功能说明。
# >>>>>>> origin/main

# 手动编辑文件，保留两行或合并内容，删除冲突标记

# 解决冲突后，标记为已解决
git add 接口文档.md

# 提交冲突解决
git commit -m "解决冲突：合并开发者1和2的修改"

# 推送解决后的代码
git push origin main
```

#### 实验结果

**截图18：第二个目录克隆仓库**
> [在此处插入截图，显示在第二个目录中执行 `git clone` 命令的输出，确认仓库克隆成功]

**截图19：第二个目录修改文件并提交**
> [在此处插入截图，显示在第二个目录中修改 `接口文档.md` 的内容，以及 `git commit` 的成功输出]

**截图20：第一个目录修改同一文件**
> [在此处插入截图，显示在第一个目录中修改 `接口文档.md` 的同一位置，展示修改内容]

**截图21：git pull 产生冲突**
> [在此处插入截图，显示 `git pull origin main` 命令的输出，显示冲突信息，如 "CONFLICT (content): Merge conflict in 接口文档.md" 和 "Automatic merge failed; fix conflicts and then commit the result"]

**截图22：git status 显示冲突状态**
> [在此处插入截图，显示 `git status` 命令的输出，显示冲突文件列表，状态为 "both modified: 接口文档.md"]

**截图23：冲突文件内容（显示冲突标记）**
> [在此处插入截图，显示 `接口文档.md` 文件中的冲突标记，包括 `<<<<<<< HEAD`、`=======` 和 `>>>>>>> origin/main` 标记，以及两边的冲突内容]

**截图24：解决冲突后的文件内容**
> [在此处插入截图，显示手动解决冲突后的 `接口文档.md` 文件内容，冲突标记已删除，两边的修改已合并或保留]

**截图25：git commit 提交冲突解决**
> [在此处插入截图，显示 `git commit -m "解决冲突：合并开发者1和2的修改"` 命令的输出，确认冲突解决已提交]

**截图26：git push 推送成功**
> [在此处插入截图，显示 `git push origin main` 命令的输出，确认冲突解决后的代码已成功推送到远程仓库]

#### 结果分析

成功模拟了多人协作中的冲突场景。当两个开发者同时修改同一文件的同一位置时，Git会检测到冲突并阻止自动合并。通过手动编辑冲突文件，删除冲突标记并合并两边的修改，成功解决了冲突。这个过程展示了Git在多人协作中的冲突检测和解决机制，是团队开发中必须掌握的重要技能。

---

### 3.6 标签操作

#### 操作步骤

1. 创建轻量标签 `v1.0.0`
2. 创建带注释的标签 `v1.0.1`
3. 查看所有标签
4. 查看标签详情
5. 推送标签到远程仓库
6. 删除本地标签
7. 删除远程标签
8. 验证删除结果

#### 关键命令

```bash
# 创建轻量标签
git tag v1.0.0

# 创建带注释的标签
git tag -a v1.0.1 -m "版本1.0.1：完成基础功能"

# 查看所有标签
git tag

# 查看标签详情
git show v1.0.1

# 推送单个标签到远程
git push origin v1.0.0
git push origin v1.0.1

# 或一次性推送所有标签
git push origin --tags

# 查看远程标签
git ls-remote --tags origin

# 删除本地标签
git tag -d v1.0.0

# 删除远程标签
git push origin --delete v1.0.0

# 验证删除结果
git tag
git ls-remote --tags origin
```

#### 实验结果

**截图27：创建标签**
> [在此处插入截图，显示创建标签的命令执行过程，包括 `git tag v1.0.0` 和 `git tag -a v1.0.1 -m "版本1.0.1：完成基础功能"` 的输出]

**截图28：git tag 显示标签列表**
> [在此处插入截图，显示 `git tag` 命令的输出，列出所有本地标签，如 "v1.0.0" 和 "v1.0.1"]

**截图29：git show 显示标签详情**
> [在此处插入截图，显示 `git show v1.0.1` 命令的输出，展示带注释标签的详细信息，包括标签名称、提交信息、作者、日期和提交内容]

**截图30：git push 推送标签到远程**
> [在此处插入截图，显示 `git push origin v1.0.1` 命令的输出，确认标签已成功推送到远程仓库，如 "Total 0 (delta 0), reused 0 (delta 0), pack-reused 0" 和 "To [仓库地址]" 等]

**截图31：远程仓库标签页面**
> [在此处插入截图，显示GitHub/Gitee网页上的标签页面，展示所有已推送的标签列表，确认标签已成功推送到远程]

**截图32：删除本地标签**
> [在此处插入截图，显示 `git tag -d v1.0.0` 命令的输出，确认本地标签已删除，以及 `git tag` 显示删除后的标签列表]

**截图33：删除远程标签**
> [在此处插入截图，显示 `git push origin --delete v1.0.0` 命令的输出，确认远程标签已删除，如 "To [仓库地址]" 和 "deleted refs/tags/v1.0.0" 等]

**截图34：验证删除结果**
> [在此处插入截图，显示 `git tag` 和 `git ls-remote --tags origin` 命令的输出，对比删除前后的标签列表，确认标签已成功删除]

#### 结果分析

成功完成了标签的创建、查看、推送和删除操作。标签是Git中用于标记特定版本的重要工具，轻量标签只是一个指向特定提交的引用，而带注释的标签则包含更多信息，如标签说明、创建者、创建时间等。标签的创建和管理有助于项目的版本发布和管理，特别是在软件发布时，可以使用标签标记不同的版本号。

---

## 四、实验总结

### 4.1 实验收获

通过本次Git版本控制实验，我深入理解并掌握了以下内容：

1. **分支管理**：学会了如何创建、切换、合并和删除分支。分支是Git的核心功能之一，允许在不影响主分支的情况下进行功能开发和实验。通过分支，可以实现并行开发，提高开发效率。

2. **版本控制**：掌握了Git的基本操作，包括文件的添加、提交、查看历史等。Git能够完整记录项目的版本历史，方便回溯和查看任何历史版本。

3. **多人协作**：理解了分布式版本控制系统的工作原理，学会了如何通过远程仓库进行多人协作。通过推送和拉取操作，团队成员可以共享代码和协同开发。

4. **冲突解决**：掌握了如何处理多人协作中的代码冲突。当多个开发者同时修改同一文件时，Git会检测冲突并提示解决。通过手动编辑冲突文件，可以合并不同开发者的修改。

5. **标签管理**：学会了如何创建、查看、推送和删除标签。标签是标记项目重要版本的有效方式，特别适用于软件发布和版本管理。

### 4.2 遇到的问题及解决方法

1. **问题**：在冲突解决时，最初不清楚如何识别冲突标记，不知道应该保留哪些内容。

   **解决方法**：通过查阅Git文档和实验指导，理解了冲突标记的含义：
   - `<<<<<<< HEAD` 表示当前分支（本地）的修改
   - `=======` 分隔两边的修改
   - `>>>>>>> origin/main` 表示远程分支的修改
   
   解决冲突时需要仔细阅读两边的修改内容，决定是保留一边、保留两边，还是合并修改，然后删除所有冲突标记。

2. **问题**：在推送标签时，不确定是否需要逐个推送还是可以批量推送。

   **解决方法**：通过实践发现，可以使用 `git push origin --tags` 一次性推送所有标签，也可以使用 `git push origin <标签名>` 推送单个标签。根据实际需求选择合适的方式。

3. **问题**：在合并分支时，有时会出现 "Fast-forward" 合并，有时会出现 "Merge made by the 'recursive' strategy"。

   **解决方法**：通过查阅资料了解到，Fast-forward 合并发生在主分支没有新的提交时，Git只是简单地将分支指针前移。而递归策略合并发生在主分支有新的提交时，Git会创建一个合并提交。两种方式都是正常的合并方式。

### 4.3 实验体会

1. **版本控制的重要性**：Git作为分布式版本控制系统，为软件开发提供了强大的版本管理能力。通过Git，可以安全地进行代码修改，随时回退到任何历史版本，这对于大型项目的开发至关重要。

2. **分支策略的价值**：合理使用分支可以大大提高开发效率。通过创建功能分支，可以在不影响主分支的情况下进行实验和开发，开发完成后再合并到主分支。这种工作流程是现代软件开发的最佳实践。

3. **团队协作的必要性**：多人协作是软件开发中的常态，Git提供了完善的协作机制。通过远程仓库、分支管理和冲突解决，团队成员可以高效地协同工作，共同完成项目开发。

4. **实践的重要性**：虽然Git的概念和命令可以通过理论学习掌握，但只有通过实际动手操作，才能真正理解Git的工作原理和使用技巧。本次实验提供了很好的实践机会。

5. **持续学习的必要性**：Git功能强大，命令众多，本次实验只涉及了Git的基础功能。在实际项目开发中，还会遇到更多复杂的情况，需要不断学习和实践，提高Git使用水平。

### 4.4 对Git的进一步认识

通过本次实验，我对Git有了更深入的认识：

1. **分布式特性**：Git是分布式版本控制系统，每个开发者都拥有完整的项目历史，不依赖于中央服务器。这使得Git更加灵活和可靠。

2. **快照机制**：Git不是存储文件的变化，而是存储文件的快照。每次提交都是对整个项目状态的完整记录，这使得Git能够快速切换版本。

3. **分支的本质**：Git的分支实际上只是一个指向提交的指针，创建分支非常轻量级，这使得Git鼓励使用分支进行开发。

4. **三棵树模型**：Git使用工作区、暂存区和版本库三棵树来管理文件状态，这种设计使得Git能够精确控制文件的提交过程。

### 4.5 实验建议

1. **多实践**：Git的掌握需要大量的实践，建议在日常开发中多使用Git，熟悉各种命令和场景。

2. **理解原理**：不仅要会使用Git命令，还要理解Git的工作原理，这样才能在遇到问题时快速定位和解决。

3. **学习高级功能**：在掌握基础功能后，可以学习Git的高级功能，如rebase、cherry-pick、stash等，这些功能在复杂场景中非常有用。

4. **建立工作流程**：根据项目特点，建立合适的Git工作流程，如Git Flow、GitHub Flow等，提高团队协作效率。

---

## 五、附录

### 5.1 实验过程中使用的关键命令总结

```bash
# 基本操作
git status                    # 查看仓库状态
git add <文件>                # 添加文件到暂存区
git commit -m "提交信息"       # 提交到本地库
git log --oneline             # 查看提交历史

# 分支操作
git branch                    # 查看分支列表
git checkout -b <分支名>       # 创建并切换到新分支
git checkout <分支名>          # 切换到指定分支
git merge <分支名>             # 合并分支
git branch -d <分支名>         # 删除分支

# 远程操作
git remote -v                 # 查看远程仓库
git push origin <分支名>       # 推送到远程
git pull origin <分支名>       # 从远程拉取
git clone <仓库地址>           # 克隆仓库

# 冲突解决
git status                    # 查看冲突状态
# 手动编辑冲突文件
git add <冲突文件>             # 标记冲突已解决
git commit -m "解决冲突"        # 提交冲突解决

# 标签操作
git tag                       # 查看标签列表
git tag <标签名>               # 创建轻量标签
git tag -a <标签名> -m "说明"  # 创建带注释标签
git show <标签名>              # 查看标签详情
git push origin <标签名>       # 推送标签
git tag -d <标签名>            # 删除本地标签
git push origin --delete <标签名> # 删除远程标签
```

### 5.2 参考资料

1. Git官方文档：https://git-scm.com/doc
2. 廖雪峰Git教程：https://www.liaoxuefeng.com/wiki/896043488029600
3. GitHub官方文档：https://docs.github.com
4. Pro Git书籍：https://git-scm.com/book

---

**实验报告完成日期**：2025年11月26日  
**报告编写者**：[填写姓名]  
**指导教师**：[填写教师姓名]

---

*注：本报告中的所有截图位置已标注，请在实际完成实验后，将对应的截图插入到相应位置。截图应清晰显示命令输出和操作结果，确保实验报告图文并茂。*
