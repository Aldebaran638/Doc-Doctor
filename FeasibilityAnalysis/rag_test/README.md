# C++ å‡½æ•°ç›¸å…³æ€§åˆ†æå™¨ (RAG æŠ€æœ¯æ¼”ç¤º) - é‡æ„ç‰ˆ

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ RAG (Retrieval-Augmented Generation) æŠ€æœ¯çš„ TypeScript ç¨‹åºï¼Œæä¾›ä¸¤ç§ä¸åŒçš„ C++ å‡½æ•°ç›¸å…³æ€§åˆ†ææ–¹æ¡ˆã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

- **åŒæ¨¡å¼RAG**: æä¾›åœ¨çº¿å’Œç¦»çº¿ä¸¤ç§RAGå®ç°
- **ç»Ÿä¸€æ¥å£**: ä¸¤ä¸ªå‡½æ•°éƒ½æ¥å—å­—ç¬¦ä¸²è¾“å…¥ï¼Œè¿”å›ç›¸å…³å‡½æ•°æ•°ç»„
- **åŠŸèƒ½æµ‹è¯•**: å®Œæ•´çš„æµ‹è¯•å¥—ä»¶éªŒè¯ä¸¤ç§ç®—æ³•çš„æ•ˆæœ
- **æ€§èƒ½å¯¹æ¯”**: è‡ªåŠ¨æµ‹è¯•å¹¶æ¯”è¾ƒä¸¤ç§ç®—æ³•çš„æ€§èƒ½å·®å¼‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
rag_test/
â”œâ”€â”€ utils/                    # æ ¸å¿ƒRAGå‡½æ•°
â”‚   â”œâ”€â”€ online-rag.ts        # ç½‘ç»œç‰ˆæœ¬RAG (ä½¿ç”¨å‘é‡åµŒå…¥)
â”‚   â””â”€â”€ offline-rag.ts       # ç¦»çº¿ç‰ˆæœ¬RAG (ä½¿ç”¨æ–‡æœ¬ç›¸ä¼¼åº¦)
â”œâ”€â”€ test.ts                  # ä¸»æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ archive/                 # æ—§ç‰ˆæœ¬æ–‡ä»¶å­˜æ¡£
â”œâ”€â”€ package.json             # é¡¹ç›®é…ç½®
â””â”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. ç¼–è¯‘é¡¹ç›®

```bash
npm run build
```

### 3. è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œå®Œæ•´æµ‹è¯•
node -e "import('./dist/test.js').then(m => m.runTests())"

# ä»…æµ‹è¯•ç¦»çº¿ç‰ˆæœ¬
node -e "import('./dist/utils/offline-rag.js').then(m => console.log(m.findRelatedFunctionsOffline('int add(int a, int b) { return a + b; }')))"
```

## ï¿½ API ä½¿ç”¨è¯´æ˜

### ç¦»çº¿ç‰ˆæœ¬ RAG å‡½æ•°

```typescript
import { findRelatedFunctionsOffline, OfflineRelatedFunction } from "./utils/offline-rag.js";

/**
 * @param inputFunction - è¾“å…¥çš„C++å‡½æ•°å­—ç¬¦ä¸²
 * @param topK - è¿”å›æœ€ç›¸å…³çš„å‰Kä¸ªå‡½æ•°ï¼Œé»˜è®¤ä¸º5
 * @returns OfflineRelatedFunction[] - ç›¸å…³å‡½æ•°æ•°ç»„
 */
const results = findRelatedFunctionsOffline(`
int sum(int x, int y) {
    return x + y;
}
`, 3);
```

### ç½‘ç»œç‰ˆæœ¬ RAG å‡½æ•°

```typescript
import { findRelatedFunctionsOnline, RelatedFunction } from "./utils/online-rag.js";

/**
 * @param inputFunction - è¾“å…¥çš„C++å‡½æ•°å­—ç¬¦ä¸²  
 * @param topK - è¿”å›æœ€ç›¸å…³çš„å‰Kä¸ªå‡½æ•°ï¼Œé»˜è®¤ä¸º5
 * @returns Promise<RelatedFunction[]> - ç›¸å…³å‡½æ•°æ•°ç»„
 */
const results = await findRelatedFunctionsOnline(`
int multiply(int a, int b) {
    return a * b;
}
`, 3);
```

## ğŸ“Š æµ‹è¯•ç»“æœç¤ºä¾‹

```
ğŸš€ å¼€å§‹RAGå‡½æ•°åŠŸèƒ½æµ‹è¯•
============================================================

ğŸ“ æµ‹è¯•å‡½æ•°: addition
è¾“å…¥å‡½æ•°:
int sum(int x, int y) {
    return x + y;
}
----------------------------------------
ï¿½ ç¦»çº¿ç‰ˆæœ¬ç»“æœ (è€—æ—¶: 1ms):
   1. add (ç›¸ä¼¼åº¦: 0.000)
      æ–‡ä»¶: math.cpp
      ä»£ç : int add(int a, int b) { return a + b; }...
   2. subtract (ç›¸ä¼¼åº¦: 0.000)  
      æ–‡ä»¶: math.cpp
      ä»£ç : int subtract(int x, int y) { return x - y; }...

ğŸŒ ç½‘ç»œç‰ˆæœ¬ç»“æœ (è€—æ—¶: 2847ms):
   1. add (ç›¸ä¼¼åº¦: 0.892)
      æ–‡ä»¶: math.cpp  
      ä»£ç : int add(int a, int b) { return a + b; }...
   2. sum_array (ç›¸ä¼¼åº¦: 0.754)
      æ–‡ä»¶: algorithms.cpp
      ä»£ç : int sum_array(int numbers[], int count) { ... }...
```

## ğŸ” ç®—æ³•å¯¹æ¯”

| ç‰¹æ€§ | ç¦»çº¿ç‰ˆæœ¬ | ç½‘ç»œç‰ˆæœ¬ |
|------|----------|----------|
| **ç®—æ³•** | Jaccard ç›¸ä¼¼åº¦ | ä½™å¼¦ç›¸ä¼¼åº¦ (å‘é‡åµŒå…¥) |
| **ç½‘ç»œä¾èµ–** | âŒ æ—  | âœ… éœ€è¦ (é¦–æ¬¡) |
| **å¯åŠ¨é€Ÿåº¦** | âš¡ æå¿« | ğŸŒ è¾ƒæ…¢ |
| **å‡†ç¡®æ€§** | ğŸ“Š åŸºç¡€ | ğŸ† é«˜ç²¾åº¦ |
| **è¯­ä¹‰ç†è§£** | âŒ ä»…è¯æ±‡ | âœ… æ·±åº¦è¯­ä¹‰ |
| **èµ„æºæ¶ˆè€—** | ğŸ’¡ æä½ | ğŸ”¥ è¾ƒé«˜ |

## ğŸ’¡ æ ¸å¿ƒæŠ€æœ¯

### ç¦»çº¿ç‰ˆæœ¬ (`offline-rag.ts`)
- **æ–‡æœ¬é¢„å¤„ç†**: ç§»é™¤æ³¨é‡Šã€æå–å…³é”®è¯
- **Jaccard ç›¸ä¼¼åº¦**: åŸºäºè¯æ±‡é›†åˆçš„é‡å åº¦è®¡ç®—
- **å…³é”®è¯è¿‡æ»¤**: è¿‡æ»¤é€šç”¨ç¼–ç¨‹å…³é”®å­—

### ç½‘ç»œç‰ˆæœ¬ (`online-rag.ts`)
- **å‘é‡åµŒå…¥**: ä½¿ç”¨ `all-MiniLM-L6-v2` æ¨¡å‹
- **ä½™å¼¦ç›¸ä¼¼åº¦**: åœ¨é«˜ç»´å‘é‡ç©ºé—´ä¸­è®¡ç®—ç›¸ä¼¼åº¦
- **è¯­ä¹‰ç†è§£**: ç†è§£ä»£ç çš„æ·±å±‚å«ä¹‰è€Œéä»…ä»…è¯æ±‡

## ğŸ¯ åº”ç”¨åœºæ™¯

1. **ä»£ç é‡æ„è¾…åŠ©**: æ‰¾å‡ºåŠŸèƒ½ç›¸ä¼¼éœ€è¦åˆå¹¶çš„å‡½æ•°
2. **API å‘ç°**: åœ¨å¤§å‹ä»£ç åº“ä¸­å‘ç°ç›¸å…³åŠŸèƒ½
3. **æ–‡æ¡£åŒæ­¥æ£€æŸ¥**: éªŒè¯å‡½æ•°ä¿®æ”¹åç›¸å…³æ–‡æ¡£æ˜¯å¦éœ€è¦æ›´æ–°
4. **ä»£ç å®¡æŸ¥**: è¯†åˆ«æ½œåœ¨çš„é‡å¤å®ç°

## ğŸš§ æ‰©å±•æ–¹å‘

- æ”¯æŒæ›´å¤šç¼–ç¨‹è¯­è¨€ï¼ˆPythonã€JavaScriptç­‰ï¼‰
- é›†æˆåˆ° VS Code æ’ä»¶ä¸­
- æ·»åŠ å‡½æ•°è°ƒç”¨å…³ç³»åˆ†æ
- å®ç°å¢é‡ç´¢å¼•æ›´æ–°

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License